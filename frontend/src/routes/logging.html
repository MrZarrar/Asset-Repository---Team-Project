<script>
    import PocketBase from 'pocketbase';
    import { onMount } from 'svelte';

    const pb = new PocketBase('http://127.0.0.1:8090');
  
    let logs = [];

    async function fetchLogs() {
        try {
            logs = await pb.collection('logs').getFullList({ sort: '-created' });
        } catch (error) {
            console.error('Error fetching logs:', error);
        }
    }
  
    onMount(fetchLogs);
  </script>
  
  <main class="p-6 max-w-2xl mx-auto">
    <h1 class="text-xl font-semibold mt-6">Log History</h1>
    <ul class="mt-4 space-y-2">
      {#each logs as log}
        <li class="p-3 bg-gray-100 rounded shadow">
          <strong>{log.action}</strong> on <em>{log.file}</em> by <span class="text-blue-600">{log.user}</span>
          <div class="text-sm text-gray-500">{new Date(log.time).toLocaleString()}</div>
        </li>
      {/each}
    </ul>
  </main>